<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Triad.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">com.irurueta:irurueta-navigation</a> &gt; <a href="index.source.html" class="el_package">com.irurueta.navigation.inertial.calibration</a> &gt; <span class="el_source">Triad.java</span></div><h1>Triad.java</h1><pre class="source lang-java linenums">/*
 * Copyright (C) 2020 Alberto Irurueta Carro (alberto@irurueta.com)
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *         http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.irurueta.navigation.inertial.calibration;

import com.irurueta.algebra.Matrix;
import com.irurueta.algebra.WrongSizeException;
import com.irurueta.units.Measurement;

import java.io.Serializable;
import java.util.Objects;

/**
 * Contains a triad of measurement data.
 *
 * @param &lt;U&gt; type of unit.
 * @param &lt;T&gt; a type of measurement.
 */
public abstract class Triad&lt;U extends Enum&lt;?&gt;, T extends Measurement&lt;U&gt;&gt;
        implements Serializable {

    /**
     * Number of components of measurements.
     */
    public static final int COMPONENTS = 3;

    /**
     * Contains x coordinate of measurement value.
     */
    private double mValueX;

    /**
     * Contains y coordinate of measurement value.
     */
    private double mValueY;

    /**
     * Contains z coordinate of measurement value.
     */
    private double mValueZ;

    /**
     * Contains unit of measurement.
     */
    private U mUnit;

    /**
     * Constructor.
     *
     * @param unit unit of measurement.
     * @throws IllegalArgumentException if provided unit is null.
     */
<span class="fc" id="L65">    public Triad(U unit) {</span>
<span class="pc bpc" id="L66" title="1 of 2 branches missed.">        if (unit == null) {</span>
<span class="nc" id="L67">            throw new IllegalArgumentException();</span>
        }

<span class="fc" id="L70">        mUnit = unit;</span>
<span class="fc" id="L71">    }</span>

    /**
     * Constructor.
     *
     * @param unit   unit of measurement.
     * @param valueX value of x-coordinate.
     * @param valueY value of y-coordinate.
     * @param valueZ value of z-coordinate.
     * @throws IllegalArgumentException if provided unit is null.
     */
    public Triad(U unit, final double valueX, final double valueY,
                 final double valueZ) {
<span class="fc" id="L84">        this(unit);</span>
<span class="fc" id="L85">        setValueCoordinates(valueX, valueY, valueZ);</span>
<span class="fc" id="L86">    }</span>

    /**
     * Copy constructor.
     *
     * @param other instance to copy from.
     */
<span class="fc" id="L93">    public Triad(final Triad&lt;U, T&gt; other) {</span>
<span class="fc" id="L94">        copyFrom(other);</span>
<span class="fc" id="L95">    }</span>

    /**
     * Gets x coordinate of measurement value expressed in current unit.
     *
     * @return x coordinate of measurement value.
     */
    public double getValueX() {
<span class="fc" id="L103">        return mValueX;</span>
    }

    /**
     * Sets x coordinate of measurement value using current unit.
     *
     * @param valueX x coordinate of measurement value.
     */
    public void setValueX(final double valueX) {
<span class="fc" id="L112">        mValueX = valueX;</span>
<span class="fc" id="L113">    }</span>

    /**
     * Gets y coordinate of measurement value expressed in current unit.
     *
     * @return y coordinate of measurement value.
     */
    public double getValueY() {
<span class="fc" id="L121">        return mValueY;</span>
    }

    /**
     * Sets y coordinate of measurement value using current unit.
     *
     * @param valueY y coordinate of measurement value.
     */
    public void setValueY(final double valueY) {
<span class="fc" id="L130">        mValueY = valueY;</span>
<span class="fc" id="L131">    }</span>

    /**
     * Gets z coordinate of measurement value expressed in current unit.
     *
     * @return z coordinate of measurement value.
     */
    public double getValueZ() {
<span class="fc" id="L139">        return mValueZ;</span>
    }

    /**
     * Sets z coordinate of measurement value using current unit.
     *
     * @param valueZ z coordinate of measurement value.
     */
    public void setValueZ(final double valueZ) {
<span class="fc" id="L148">        mValueZ = valueZ;</span>
<span class="fc" id="L149">    }</span>

    /**
     * Sets coordinates of measurement using current unit.
     *
     * @param valueX x coordinate of measurement.
     * @param valueY y coordinate of measurement.
     * @param valueZ z coordinate of measurement.
     */
    public void setValueCoordinates(
            final double valueX, final double valueY, final double valueZ) {
<span class="fc" id="L160">        mValueX = valueX;</span>
<span class="fc" id="L161">        mValueY = valueY;</span>
<span class="fc" id="L162">        mValueZ = valueZ;</span>
<span class="fc" id="L163">    }</span>

    /**
     * Gets unit of measurement.
     *
     * @return unit of measurement.
     */
    public U getUnit() {
<span class="fc" id="L171">        return mUnit;</span>
    }

    /**
     * Sets unit of measurement.
     *
     * @param unit unit of measurement.
     * @throws IllegalArgumentException if provided value is null.
     */
    public void setUnit(final U unit) {
<span class="fc bfc" id="L181" title="All 2 branches covered.">        if (unit == null) {</span>
<span class="fc" id="L182">            throw new IllegalArgumentException();</span>
        }
<span class="fc" id="L184">        mUnit = unit;</span>
<span class="fc" id="L185">    }</span>

    /**
     * Sets value coordinates and unit.
     *
     * @param valueX x coordinate of measurement.
     * @param valueY y coordinate of measurement.
     * @param valueZ z coordinate of measurement.
     * @param unit   unit of measurement.
     * @throws IllegalArgumentException if provided unit is null.
     */
    public void setValueCoordinatesAndUnit(
            final double valueX, final double valueY, final double valueZ,
            final U unit) {
<span class="fc" id="L199">        setValueCoordinates(valueX, valueY, valueZ);</span>
<span class="fc" id="L200">        setUnit(unit);</span>
<span class="fc" id="L201">    }</span>

    /**
     * Gets measurement values as an array expressed in current unit.
     *
     * @return array containing measurement values.
     */
    public double[] getValuesAsArray() {
<span class="fc" id="L209">        return new double[]{mValueX, mValueY, mValueZ};</span>
    }

    /**
     * Gets measurement values as an array expressed in current unit.
     *
     * @param result instance where result will be stored.
     * @throws IllegalArgumentException if provided array does not have
     *                                  length 3.
     */
    public void getValuesAsArray(final double[] result) {
<span class="fc bfc" id="L220" title="All 2 branches covered.">        if (result.length != COMPONENTS) {</span>
<span class="fc" id="L221">            throw new IllegalArgumentException();</span>
        }
<span class="fc" id="L223">        result[0] = mValueX;</span>
<span class="fc" id="L224">        result[1] = mValueY;</span>
<span class="fc" id="L225">        result[2] = mValueZ;</span>
<span class="fc" id="L226">    }</span>

    /**
     * Sets measurement coordinates from provided array.
     *
     * @param values array to set values from.
     * @throws IllegalArgumentException if provided array does not have
     *                                  length 3.
     */
    public void setValueCoordinates(final double[] values) {
<span class="fc bfc" id="L236" title="All 2 branches covered.">        if (values.length != COMPONENTS) {</span>
<span class="fc" id="L237">            throw new IllegalArgumentException();</span>
        }

<span class="fc" id="L240">        mValueX = values[0];</span>
<span class="fc" id="L241">        mValueY = values[1];</span>
<span class="fc" id="L242">        mValueZ = values[2];</span>
<span class="fc" id="L243">    }</span>

    /**
     * Gets measurement values as a column matrix expressed in current unit.
     *
     * @return matrix containing measurement values.
     */
    public Matrix getValuesAsMatrix() {
<span class="fc" id="L251">        Matrix result = null;</span>
        try {
<span class="fc" id="L253">            result = new Matrix(COMPONENTS, 1);</span>
<span class="fc" id="L254">            getValuesAsMatrix(result);</span>
<span class="nc" id="L255">        } catch (final WrongSizeException ignore) {</span>
            // never happens
<span class="fc" id="L257">        }</span>

<span class="fc" id="L259">        return result;</span>
    }

    /**
     * Gets measurement values as a column matrix expressed in current unit.
     *
     * @param result instance where result will be stored.
     * @throws IllegalArgumentException if provided matrix is not 3x1.
     */
    public void getValuesAsMatrix(final Matrix result) {
<span class="fc bfc" id="L269" title="All 4 branches covered.">        if (result.getRows() != COMPONENTS || result.getColumns() != 1) {</span>
<span class="fc" id="L270">            throw new IllegalArgumentException();</span>
        }
<span class="fc" id="L272">        result.setElementAtIndex(0, mValueX);</span>
<span class="fc" id="L273">        result.setElementAtIndex(1, mValueY);</span>
<span class="fc" id="L274">        result.setElementAtIndex(2, mValueZ);</span>
<span class="fc" id="L275">    }</span>

    /**
     * Sets measurement coordinates from provided column matrix.
     *
     * @param values matrix to set values from.
     * @throws IllegalArgumentException if provided matrix is not 3x1.
     */
    public void setValueCoordinates(final Matrix values) {
<span class="fc bfc" id="L284" title="All 4 branches covered.">        if (values.getRows() != COMPONENTS || values.getColumns() != 1) {</span>
<span class="fc" id="L285">            throw new IllegalArgumentException();</span>
        }

<span class="fc" id="L288">        mValueX = values.getElementAtIndex(0);</span>
<span class="fc" id="L289">        mValueY = values.getElementAtIndex(1);</span>
<span class="fc" id="L290">        mValueZ = values.getElementAtIndex(2);</span>
<span class="fc" id="L291">    }</span>

    /**
     * Gets x coordinate of measurement value.
     *
     * @return x coordinate of measurement value.
     */
    public abstract T getMeasurementX();

    /**
     * Gets x coordinate of measurement value.
     *
     * @param result instance where x coordinate of measurement value
     *               will be stored.
     */
    public abstract void getMeasurementX(final T result);

    /**
     * Sets x coordinate of measurement value.
     *
     * @param measurementX x coordinate of measurement value.
     */
    public abstract void setMeasurementX(final T measurementX);

    /**
     * Gets y coordinate of measurement value.
     *
     * @return y coordinate of measurement value.
     */
    public abstract T getMeasurementY();

    /**
     * Gets y coordinate of measurement value.
     *
     * @param result instance where y coordinate of measurement value
     *               will be stored.
     */
    public abstract void getMeasurementY(final T result);

    /**
     * Sets y coordinate of measurement value.
     *
     * @param measurementY y coordinate of measurement value.
     */
    public abstract void setMeasurementY(final T measurementY);

    /**
     * Gets z coordinate of measurement value.
     *
     * @return z coordinate of measurement value.
     */
    public abstract T getMeasurementZ();

    /**
     * Gets z coordinate of measurement value.
     *
     * @param result instance where z coordinate of measurement value
     *               will be stored.
     */
    public abstract void getMeasurementZ(final T result);

    /**
     * Sets z coordinate of measurement value.
     *
     * @param measurementZ z coordinate of measurement value.
     */
    public abstract void setMeasurementZ(final T measurementZ);

    /**
     * Sets measurement coordinates.
     *
     * @param measurementX x coordinate of measurement value.
     * @param measurementY y coordinate of measurement value.
     * @param measurementZ z coordinate of measurement value.
     */
    public abstract void setMeasurementCoordinates(
            final T measurementX, final T measurementY, final T measurementZ);

    /**
     * Gets squared norm expressed in squared current unit.
     *
     * @return squared norm for triad values.
     */
    public double getSqrNorm() {
<span class="fc" id="L375">        return mValueX * mValueX + mValueY * mValueY + mValueZ * mValueZ;</span>
    }

    /**
     * Gets norm expressed in current unit.
     *
     * @return norm for triad values.
     */
    public double getNorm() {
<span class="fc" id="L384">        return Math.sqrt(getSqrNorm());</span>
    }

    /**
     * Gets norm as a measurement.
     *
     * @return norm as a measurement.
     */
    public abstract T getMeasurementNorm();

    /**
     * Gets norm as a measurement.
     *
     * @param result instance where norm value will be stored.
     */
    public void getMeasurementNorm(final T result) {
<span class="fc" id="L400">        result.setValue(getNorm());</span>
<span class="fc" id="L401">        result.setUnit(getUnit());</span>
<span class="fc" id="L402">    }</span>

    /**
     * Copies this instance data into provided instance.
     *
     * @param output destination instance where data will be copied to.
     */
    public void copyTo(final Triad&lt;U, T&gt; output) {
<span class="fc" id="L410">        output.copyFrom(this);</span>
<span class="fc" id="L411">    }</span>

    /**
     * Copies data of provided instance into this instance.
     *
     * @param input instance to copy data from.
     */
    public void copyFrom(final Triad&lt;U, T&gt; input) {
<span class="fc" id="L419">        mValueX = input.mValueX;</span>
<span class="fc" id="L420">        mValueY = input.mValueY;</span>
<span class="fc" id="L421">        mValueZ = input.mValueZ;</span>
<span class="fc" id="L422">        mUnit = input.mUnit;</span>
<span class="fc" id="L423">    }</span>

    /**
     * Computes and returns hash code for this instance. Hash codes are almost unique
     * values that are useful for fas classification and storage of objects in collections.
     *
     * @return Hash code.
     */
    @Override
    public int hashCode() {
<span class="fc" id="L433">        return Objects.hash(mValueX, mValueY, mValueZ, mUnit);</span>
    }

    /**
     * Checks if provided instance has exactly the same contents as this instance.
     *
     * @param other instance to be compared.
     * @return true if both instances are considered to be equal, false otherwise.
     */
    public boolean equals(final Triad&lt;U, T&gt; other) {
<span class="fc" id="L443">        return equals(other, 0.0);</span>
    }

    /**
     * Checks if provided instance has contents similar to this instance up to provided
     * threshold value.
     *
     * @param other     instance to be compared.
     * @param threshold maximum allowed difference between values.
     * @return true if both instances are considered to be equal (up to provided
     * threshold), false otherwise.
     */
    public boolean equals(final Triad&lt;U, T&gt; other, final double threshold) {
<span class="fc bfc" id="L456" title="All 2 branches covered.">        if (other == null) {</span>
<span class="fc" id="L457">            return false;</span>
        }

<span class="fc bfc" id="L460" title="All 2 branches covered.">        return Math.abs(mValueX - other.mValueX) &lt;= threshold</span>
<span class="pc bpc" id="L461" title="1 of 2 branches missed.">                &amp;&amp; Math.abs(mValueY - other.mValueY) &lt;= threshold</span>
<span class="pc bpc" id="L462" title="1 of 2 branches missed.">                &amp;&amp; Math.abs(mValueZ - other.mValueZ) &lt;= threshold</span>
<span class="pc bpc" id="L463" title="1 of 2 branches missed.">                &amp;&amp; Objects.equals(mUnit, other.mUnit);</span>
    }


    /**
     * Checks if provided object is a Triad instance having exactly the same contents
     * as this instance.
     *
     * @param o object to be compared.
     * @return true if both objects are considered to be equal, false otherwise.
     */
    @Override
    public boolean equals(Object o) {
<span class="fc bfc" id="L476" title="All 2 branches covered.">        if (this == o) {</span>
<span class="fc" id="L477">            return true;</span>
        }
<span class="fc bfc" id="L479" title="All 4 branches covered.">        if (o == null || getClass() != o.getClass()) {</span>
<span class="fc" id="L480">            return false;</span>
        }

        //noinspection unchecked
<span class="fc" id="L484">        final Triad&lt;U, T&gt; triad = (Triad&lt;U, T&gt;) o;</span>
<span class="fc" id="L485">        return equals(triad);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.2.201808211720</span></div></body></html>