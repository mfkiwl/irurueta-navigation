<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>BodyKinematicsSequence.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">com.irurueta:irurueta-navigation</a> &gt; <a href="index.source.html" class="el_package">com.irurueta.navigation.inertial.calibration</a> &gt; <span class="el_source">BodyKinematicsSequence.java</span></div><h1>BodyKinematicsSequence.java</h1><pre class="source lang-java linenums">/*
 * Copyright (C) 2020 Alberto Irurueta Carro (alberto@irurueta.com)
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *         http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.irurueta.navigation.inertial.calibration;

import com.irurueta.units.Acceleration;
import com.irurueta.units.AccelerationConverter;
import com.irurueta.units.AccelerationUnit;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;
import java.util.Objects;

/**
 * Contains a collection of items containing body kinematics
 * measurements ordered by the timestamp when the measurement was made.
 * Measurements within a sequence will be made while the device is
 * being moved.
 * Samples between sequences will be ignored because it will be assumed
 * that the device will be static.
 * Hence, during static periods, only the mean accelerations will be measured.
 * The mean accelerations during static periods will approximately match the
 * gravity versor expressed in body coordinates.
 *
 * @param &lt;T&gt; a type of {@link TimedBodyKinematics}.
 */
public class BodyKinematicsSequence&lt;T extends TimedBodyKinematics&gt;
        implements Serializable, Cloneable {

    /**
     * List of items.
     * If items are provided unsorted, they are reordered by timestamp on
     * getter method.
     */
    private List&lt;T&gt; mItems;

    /**
     * Contains sorted list of items.
     * This list is kept for performance reasons to reduce the amount of
     * required sorting.
     */
    private List&lt;T&gt; mSortedItems;

    /**
     * X-coordinate of mean specific force during the static period happening
     * right before this sequence was measured. Expressed in meters per
     * squared second (m/s^2).
     */
    private double mBeforeMeanFx;

    /**
     * Y-coordinate of mean specific force during the static period happening
     * right before this sequence was measured. Expressed in meters per
     * squared second (m/s^2).
     */
    private double mBeforeMeanFy;

    /**
     * Z-coordinate of mean specific force during the static period happening
     * right before this sequence was measured. Expressed in meters per
     * squared second (m/s^2).
     */
    private double mBeforeMeanFz;

    /**
     * X-coordinate of mean specific force during the static period happening
     * right after this sequence was measured. Expressed in meters per squared
     * second (m/s^2).
     */
    private double mAfterMeanFx;

    /**
     * Y-coordinate of mean specific force during the static period happening
     * right after this sequence was measured. Expressed in meters per squared
     * second (m/s^2).
     */
    private double mAfterMeanFy;

    /**
     * Z-coordinate of mean specific force during the static period happening
     * right after this sequence was measured. Expressed in meters per squared
     * second (m/s^2).
     */
    private double mAfterMeanFz;

    /**
     * Constructor.
     */
<span class="fc" id="L104">    public BodyKinematicsSequence() {</span>
<span class="fc" id="L105">    }</span>

    /**
     * Constructor.
     *
     * @param items list of items containing body kinematics to be kept into
     *              this sequence.
     */
<span class="fc" id="L113">    public BodyKinematicsSequence(final List&lt;T&gt; items) {</span>
<span class="fc" id="L114">        mItems = items;</span>
<span class="fc" id="L115">    }</span>

    /**
     * Constructor.
     *
     * @param beforeMeanFx x-coordinate of mean specific force during the static
     *                     period happening right before this sequence was measured.
     *                     Expressed in meters per squared second (m/s^2).
     * @param beforeMeanFy y-coordinate of mean specific force during the static
     *                     period happening right before this sequence was measured.
     *                     Expressed in meters per squared second (m/s^2).
     * @param beforeMeanFz z-coordinate of mean specific force during the static
     *                     period happening right before this sequence was measured.
     *                     Expressed in meters per squared second (m/s^2).
     * @param afterMeanFx  x-coordinate of mean specific force during the static
     *                     period happening right after this sequence was measured.
     *                     Expressed in meters per squared second (m/s^2).
     * @param afterMeanFy  y-coordinate of mean specific force during the static
     *                     period happening right after this sequence was measured.
     *                     Expressed in meters per squared second (m/s^2).
     * @param afterMeanFz  z-coordinate of mean specific force during the static
     *                     period happening right after this sequence was measured.
     *                     Expressed in meters per squared second (m/s^2).
     */
    public BodyKinematicsSequence(
            final double beforeMeanFx,
            final double beforeMeanFy,
            final double beforeMeanFz,
            final double afterMeanFx,
            final double afterMeanFy,
<span class="fc" id="L145">            final double afterMeanFz) {</span>
<span class="fc" id="L146">        setBeforeMeanSpecificForceCoordinates(</span>
                beforeMeanFx, beforeMeanFy, beforeMeanFz);
<span class="fc" id="L148">        setAfterMeanSpecificForceCoordinates(</span>
                afterMeanFx, afterMeanFy, afterMeanFz);
<span class="fc" id="L150">    }</span>

    /**
     * Constructor.
     *
     * @param beforeMeanSpecificForceX x-coordinate of mean specific force during
     *                                 the static period happening right before this
     *                                 sequence was measured.
     * @param beforeMeanSpecificForceY y-coordinate of mean specific force during
     *                                 the static period happening right before this
     *                                 sequence was measured.
     * @param beforeMeanSpecificForceZ z-coordinate of mean specific force during
     *                                 the static period happening right before this
     *                                 sequence was measured.
     * @param afterMeanSpecificForceX  x-coordinate of mean specific force during
     *                                 the static period happening right after this
     *                                 sequence was measured.
     * @param afterMeanSpecificForceY  y-coordinate of mean specific force during
     *                                 the static period happening right after this
     *                                 sequence was measured.
     * @param afterMeanSpecificForceZ  z-coordinate of mean specific force during
     *                                 the static period happening right after this
     *                                 sequence was measured.
     */
    public BodyKinematicsSequence(
            final Acceleration beforeMeanSpecificForceX,
            final Acceleration beforeMeanSpecificForceY,
            final Acceleration beforeMeanSpecificForceZ,
            final Acceleration afterMeanSpecificForceX,
            final Acceleration afterMeanSpecificForceY,
<span class="fc" id="L180">            final Acceleration afterMeanSpecificForceZ) {</span>
<span class="fc" id="L181">        setBeforeMeanSpecificForceCoordinates(</span>
                beforeMeanSpecificForceX,
                beforeMeanSpecificForceY,
                beforeMeanSpecificForceZ);
<span class="fc" id="L185">        setAfterMeanSpecificForceCoordinates(</span>
                afterMeanSpecificForceX,
                afterMeanSpecificForceY,
                afterMeanSpecificForceZ);
<span class="fc" id="L189">    }</span>

    /**
     * @param items        list of items containing body kinematics to be kept into
     *                     this sequence.
     * @param beforeMeanFx x-coordinate of mean specific force during the static
     *                     period happening right before this sequence was measured.
     *                     Expressed in meters per squared second (m/s^2).
     * @param beforeMeanFy y-coordinate of mean specific force during the static
     *                     period happening right before this sequence was measured.
     *                     Expressed in meters per squared second (m/s^2).
     * @param beforeMeanFz z-coordinate of mean specific force during the static
     *                     period happening right before this sequence was measured.
     *                     Expressed in meters per squared second (m/s^2).
     * @param afterMeanFx  x-coordinate of mean specific force during the static
     *                     period happening right after this sequence was measured.
     *                     Expressed in meters per squared second (m/s^2).
     * @param afterMeanFy  y-coordinate of mean specific force during the static
     *                     period happening right after this sequence was measured.
     *                     Expressed in meters per squared second (m/s^2).
     * @param afterMeanFz  z-coordinate of mean specific force during the static
     *                     period happening right after this sequence was measured.
     *                     Expressed in meters per squared second (m/s^2).
     */
    public BodyKinematicsSequence(
            final List&lt;T&gt; items,
            final double beforeMeanFx,
            final double beforeMeanFy,
            final double beforeMeanFz,
            final double afterMeanFx,
            final double afterMeanFy,
            final double afterMeanFz) {
<span class="fc" id="L221">        this(items);</span>
<span class="fc" id="L222">        setBeforeMeanSpecificForceCoordinates(</span>
                beforeMeanFx, beforeMeanFy, beforeMeanFz);
<span class="fc" id="L224">        setAfterMeanSpecificForceCoordinates(</span>
                afterMeanFx, afterMeanFy, afterMeanFz);
<span class="fc" id="L226">    }</span>

    /**
     * Constructor.
     *
     * @param items                    list of items containing body kinematics to be kept into
     *                                 this sequence.
     * @param beforeMeanSpecificForceX x-coordinate of mean specific force during
     *                                 the static period happening right before this
     *                                 sequence was measured.
     * @param beforeMeanSpecificForceY y-coordinate of mean specific force during
     *                                 the static period happening right before this
     *                                 sequence was measured.
     * @param beforeMeanSpecificForceZ z-coordinate of mean specific force during
     *                                 the static period happening right before this
     *                                 sequence was measured.
     * @param afterMeanSpecificForceX  x-coordinate of mean specific force during
     *                                 the static period happening right after this
     *                                 sequence was measured.
     * @param afterMeanSpecificForceY  y-coordinate of mean specific force during
     *                                 the static period happening right after this
     *                                 sequence was measured.
     * @param afterMeanSpecificForceZ  z-coordinate of mean specific force during
     *                                 the static period happening right after this
     *                                 sequence was measured.
     */
    public BodyKinematicsSequence(
            final List&lt;T&gt; items,
            final Acceleration beforeMeanSpecificForceX,
            final Acceleration beforeMeanSpecificForceY,
            final Acceleration beforeMeanSpecificForceZ,
            final Acceleration afterMeanSpecificForceX,
            final Acceleration afterMeanSpecificForceY,
            final Acceleration afterMeanSpecificForceZ) {
<span class="fc" id="L260">        this(items);</span>
<span class="fc" id="L261">        setBeforeMeanSpecificForceCoordinates(</span>
                beforeMeanSpecificForceX,
                beforeMeanSpecificForceY,
                beforeMeanSpecificForceZ);
<span class="fc" id="L265">        setAfterMeanSpecificForceCoordinates(</span>
                afterMeanSpecificForceX,
                afterMeanSpecificForceY,
                afterMeanSpecificForceZ);
<span class="fc" id="L269">    }</span>

    /**
     * Constructor.
     *
     * @param input instance to copy data from.
     */
    public BodyKinematicsSequence(
<span class="fc" id="L277">            final BodyKinematicsSequence&lt;T&gt; input) {</span>
<span class="fc" id="L278">        copyFrom(input);</span>
<span class="fc" id="L279">    }</span>

    /**
     * Gets items in this sequence ordered by ascending timestamp.
     *
     * @param result instance where sorted items will be stored.
     * @return true if sorted items could be retrieved, false if no items
     * are available.
     */
    public boolean getSortedItems(final List&lt;T&gt; result) {
        // already sorted items are available.
<span class="fc bfc" id="L290" title="All 2 branches covered.">        if (mSortedItems != null) {</span>
<span class="fc" id="L291">            result.clear();</span>
<span class="fc" id="L292">            result.addAll(mSortedItems);</span>
<span class="fc" id="L293">            return true;</span>
        }

<span class="fc bfc" id="L296" title="All 2 branches covered.">        if (mItems != null) {</span>
<span class="fc" id="L297">            mSortedItems = new ArrayList&lt;&gt;(mItems);</span>
<span class="fc" id="L298">            Collections.sort(mSortedItems, new Comparator&lt;T&gt;() {</span>
                @Override
                public int compare(final T o1, final T o2) {
<span class="fc" id="L301">                    final double t1 = o1.getTimestampSeconds();</span>
<span class="fc" id="L302">                    final double t2 = o2.getTimestampSeconds();</span>
<span class="fc" id="L303">                    return Double.compare(t1, t2);</span>
                }
            });

<span class="fc" id="L307">            result.clear();</span>
<span class="fc" id="L308">            result.addAll(mSortedItems);</span>
<span class="fc" id="L309">            return true;</span>
        }

<span class="fc" id="L312">        return false;</span>
    }

    /**
     * Gets items in this sequence ordered by ascending timestamp.
     *
     * @return a new list containing sorted items or null if sorted items
     * could not be retrieved..
     */
    public List&lt;T&gt; getSortedItems() {
<span class="fc" id="L322">        final List&lt;T&gt; result = new ArrayList&lt;&gt;();</span>
<span class="fc bfc" id="L323" title="All 2 branches covered.">        if (getSortedItems(result)) {</span>
<span class="fc" id="L324">            return result;</span>
        } else {
<span class="fc" id="L326">            return null;</span>
        }
    }

    /**
     * Sets list of items containing body kinematics to be kept into this
     * sequence.
     *
     * @param items items to be kept.
     */
    public void setItems(final List&lt;T&gt; items) {
<span class="fc" id="L337">        mItems = items;</span>
<span class="fc" id="L338">        mSortedItems = null;</span>
<span class="fc" id="L339">    }</span>

    /**
     * Gets number of items in this sequence.
     *
     * @return number of items in this sequence.
     */
    public int getItemsCount() {
<span class="fc bfc" id="L347" title="All 2 branches covered.">        return mItems != null ? mItems.size() : 0;</span>
    }

    /**
     * Gets x-coordinate of mean specific force during the static period
     * happening right before this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @return x-coordinate of mean specific force.
     */
    public double getBeforeMeanFx() {
<span class="fc" id="L358">        return mBeforeMeanFx;</span>
    }

    /**
     * Sets x-coordinate of mean specific force during the static period
     * happening right before this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @param beforeMeanFx x-coordinate of mean specific force.
     */
    public void setBeforeMeanFx(final double beforeMeanFx) {
<span class="fc" id="L369">        mBeforeMeanFx = beforeMeanFx;</span>
<span class="fc" id="L370">    }</span>

    /**
     * Gets y-coordinate of mean specific force during the static period
     * happening right before this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @return y-coordinate of mean specific force.
     */
    public double getBeforeMeanFy() {
<span class="fc" id="L380">        return mBeforeMeanFy;</span>
    }

    /**
     * Sets y-coordinate of mean specific force during the static period
     * happening right before this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @param beforeMeanFy y-coordinate of mean specific force.
     */
    public void setBeforeMeanFy(final double beforeMeanFy) {
<span class="fc" id="L391">        mBeforeMeanFy = beforeMeanFy;</span>
<span class="fc" id="L392">    }</span>

    /**
     * Gets z-coordinate of mean specific force during the static period
     * happening right before this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @return z-coordinate of mean specific force.
     */
    public double getBeforeMeanFz() {
<span class="fc" id="L402">        return mBeforeMeanFz;</span>
    }

    /**
     * Sets z-coordinate of mean specific force during the static period
     * happening right before this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @param beforeMeanFz z-coordinate of mean specific force.
     */
    public void setBeforeMeanFz(final double beforeMeanFz) {
<span class="fc" id="L413">        mBeforeMeanFz = beforeMeanFz;</span>
<span class="fc" id="L414">    }</span>

    /**
     * Sets coordinates of mean specific force during the static period
     * happening right before this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @param beforeMeanFx x-coordinate of mean specific force.
     * @param beforeMeanFy y-coordinate of mean specific force.
     * @param beforeMeanFz z-coordinate of mean specific force.
     */
    public void setBeforeMeanSpecificForceCoordinates(
            final double beforeMeanFx,
            final double beforeMeanFy,
            final double beforeMeanFz) {
<span class="fc" id="L429">        mBeforeMeanFx = beforeMeanFx;</span>
<span class="fc" id="L430">        mBeforeMeanFy = beforeMeanFy;</span>
<span class="fc" id="L431">        mBeforeMeanFz = beforeMeanFz;</span>
<span class="fc" id="L432">    }</span>

    /**
     * Gets x-coordinate of mean specific force during the static period
     * happening right before this sequence was measured.
     *
     * @param result x-coordinate of mean specific force.
     */
    public void getBeforeMeanSpecificForceX(final Acceleration result) {
<span class="fc" id="L441">        result.setValue(mBeforeMeanFx);</span>
<span class="fc" id="L442">        result.setUnit(AccelerationUnit.METERS_PER_SQUARED_SECOND);</span>
<span class="fc" id="L443">    }</span>

    /**
     * Gets x-coordinate of mean specific force during the static period
     * happening right before this sequence was measured.
     *
     * @return x-coordinate of mean specific force.
     */
    public Acceleration getBeforeMeanSpecificForceX() {
<span class="fc" id="L452">        return new Acceleration(mBeforeMeanFx,</span>
                AccelerationUnit.METERS_PER_SQUARED_SECOND);
    }

    /**
     * Sets x-coordinate of mean specific force during the static period
     * happening right before this sequence was measured.
     *
     * @param beforeMeanSpecificForceX x-coordinate of mean specific force.
     */
    public void setBeforeMeanSpecificForceX(
            final Acceleration beforeMeanSpecificForceX) {
<span class="fc" id="L464">        mBeforeMeanFx = convertAcceleration(beforeMeanSpecificForceX);</span>
<span class="fc" id="L465">    }</span>

    /**
     * Gets y-coordinate of mean specific force during the static period
     * happening right before this sequence was measured.
     *
     * @param result y-coordinate of mean specific force.
     */
    public void getBeforeMeanSpecificForceY(final Acceleration result) {
<span class="fc" id="L474">        result.setValue(mBeforeMeanFy);</span>
<span class="fc" id="L475">        result.setUnit(AccelerationUnit.METERS_PER_SQUARED_SECOND);</span>
<span class="fc" id="L476">    }</span>

    /**
     * Gets y-coordinate of mean specific force during the static period
     * happening right before this sequence was measured.
     *
     * @return y-coordinate of mean specific force.
     */
    public Acceleration getBeforeMeanSpecificForceY() {
<span class="fc" id="L485">        return new Acceleration(mBeforeMeanFy,</span>
                AccelerationUnit.METERS_PER_SQUARED_SECOND);
    }

    /**
     * Sets y-coordinate of mean specific force during the static period
     * happening right before this sequence was measured.
     *
     * @param beforeMeanSpecificForceY y-coordinate of mean specific force.
     */
    public void setBeforeMeanSpecificForceY(
            final Acceleration beforeMeanSpecificForceY) {
<span class="fc" id="L497">        mBeforeMeanFy = convertAcceleration(beforeMeanSpecificForceY);</span>
<span class="fc" id="L498">    }</span>

    /**
     * Gets z-coordinate of mean specific force during the static period
     * happening right before this sequence was measured.
     *
     * @param result z-coordinate of mean specific force.
     */
    public void getBeforeMeanSpecificForceZ(final Acceleration result) {
<span class="fc" id="L507">        result.setValue(mBeforeMeanFz);</span>
<span class="fc" id="L508">        result.setUnit(AccelerationUnit.METERS_PER_SQUARED_SECOND);</span>
<span class="fc" id="L509">    }</span>

    /**
     * Gets z-coordinate of mean specific force during the static period
     * happening right before this sequence was measured.
     *
     * @return z-coordinate of mean specific force.
     */
    public Acceleration getBeforeMeanSpecificForceZ() {
<span class="fc" id="L518">        return new Acceleration(mBeforeMeanFz,</span>
                AccelerationUnit.METERS_PER_SQUARED_SECOND);
    }

    /**
     * Sets z-coordinate of mean specific force during the static period
     * happening right before this sequence was measured.
     *
     * @param beforeMeanSpecificForceZ z-coordinate of mean specific force.
     */
    public void setBeforeMeanSpecificForceZ(
            final Acceleration beforeMeanSpecificForceZ) {
<span class="fc" id="L530">        mBeforeMeanFz = convertAcceleration(beforeMeanSpecificForceZ);</span>
<span class="fc" id="L531">    }</span>

    /**
     * Sets coordinates of mean specific force during the static period
     * happening right before this sequence was measured.
     *
     * @param beforeMeanSpecificForceX x-coordinate of mean specific force.
     * @param beforeMeanSpecificForceY y-coordinate of mean specific force.
     * @param beforeMeanSpecificForceZ z-coordinate of mean specific force.
     */
    public void setBeforeMeanSpecificForceCoordinates(
            final Acceleration beforeMeanSpecificForceX,
            final Acceleration beforeMeanSpecificForceY,
            final Acceleration beforeMeanSpecificForceZ) {
<span class="fc" id="L545">        setBeforeMeanSpecificForceX(beforeMeanSpecificForceX);</span>
<span class="fc" id="L546">        setBeforeMeanSpecificForceY(beforeMeanSpecificForceY);</span>
<span class="fc" id="L547">        setBeforeMeanSpecificForceZ(beforeMeanSpecificForceZ);</span>
<span class="fc" id="L548">    }</span>

    /**
     * Gets x-coordinate of mean specific force during the static period
     * happening right after this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @return x-coordinate of mean specific force.
     */
    public double getAfterMeanFx() {
<span class="fc" id="L558">        return mAfterMeanFx;</span>
    }

    /**
     * Sets x-coordinate of mean specific force during the static period
     * happening right after this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @param afterMeanFx x-coordinate of mean specific force.
     */
    public void setAfterMeanFx(final double afterMeanFx) {
<span class="fc" id="L569">        mAfterMeanFx = afterMeanFx;</span>
<span class="fc" id="L570">    }</span>

    /**
     * Gets y-coordinate of mean specific force during the static period
     * happening right after this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @return y-coordinate of mean specific force.
     */
    public double getAfterMeanFy() {
<span class="fc" id="L580">        return mAfterMeanFy;</span>
    }

    /**
     * Sets y-coordinate of mean specific force during the static period
     * happening right after this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @param afterMeanFy y-coordinate of mean specific force.
     */
    public void setAfterMeanFy(final double afterMeanFy) {
<span class="fc" id="L591">        mAfterMeanFy = afterMeanFy;</span>
<span class="fc" id="L592">    }</span>

    /**
     * Gets z-coordinate of mean specific force during the static period
     * happening right after this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @return z-coordinate of mean specific force.
     */
    public double getAfterMeanFz() {
<span class="fc" id="L602">        return mAfterMeanFz;</span>
    }

    /**
     * Sets z-coordinate of mean specific force during the static period
     * happening right after this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @param afterMeanFz z-coordinate of mean specific force.
     */
    public void setAfterMeanFz(final double afterMeanFz) {
<span class="fc" id="L613">        mAfterMeanFz = afterMeanFz;</span>
<span class="fc" id="L614">    }</span>

    /**
     * Sets coordinates of mean specific force during the static period
     * happening right after this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @param afterMeanFx x-coordinate of mean specific force.
     * @param afterMeanFy y-coordinate of mean specific force.
     * @param afterMeanFz z-coordinate of mean specific force.
     */
    public void setAfterMeanSpecificForceCoordinates(
            final double afterMeanFx,
            final double afterMeanFy,
            final double afterMeanFz) {
<span class="fc" id="L629">        mAfterMeanFx = afterMeanFx;</span>
<span class="fc" id="L630">        mAfterMeanFy = afterMeanFy;</span>
<span class="fc" id="L631">        mAfterMeanFz = afterMeanFz;</span>
<span class="fc" id="L632">    }</span>

    /**
     * Gets x-coordinate of mean specific force during the static period
     * happening right after this sequence was measured.
     *
     * @param result x-coordinate of mean specific force.
     */
    public void getAfterMeanSpecificForceX(final Acceleration result) {
<span class="fc" id="L641">        result.setValue(mAfterMeanFx);</span>
<span class="fc" id="L642">        result.setUnit(AccelerationUnit.METERS_PER_SQUARED_SECOND);</span>
<span class="fc" id="L643">    }</span>

    /**
     * Gets x-coordinate of mean specific force during the static period
     * happening right after this sequence was measured.
     *
     * @return x-coordinate of mean specific force.
     */
    public Acceleration getAfterMeanSpecificForceX() {
<span class="fc" id="L652">        return new Acceleration(mAfterMeanFx,</span>
                AccelerationUnit.METERS_PER_SQUARED_SECOND);
    }

    /**
     * Sets x-coordinate of mean specific force during the static period
     * happening right after this sequence was measured.
     *
     * @param afterMeanSpecificForceX x-coordinate of mean specific force.
     */
    public void setAfterMeanSpecificForceX(
            final Acceleration afterMeanSpecificForceX) {
<span class="fc" id="L664">        mAfterMeanFx = convertAcceleration(afterMeanSpecificForceX);</span>
<span class="fc" id="L665">    }</span>

    /**
     * Gets y-coordinate of mean specific force during the static period
     * happening right after this sequence was measured.
     *
     * @param result y-coordinate of mean specific force.
     */
    public void getAfterMeanSpecificForceY(final Acceleration result) {
<span class="fc" id="L674">        result.setValue(mAfterMeanFy);</span>
<span class="fc" id="L675">        result.setUnit(AccelerationUnit.METERS_PER_SQUARED_SECOND);</span>
<span class="fc" id="L676">    }</span>

    /**
     * Gets y-coordinate of mean specific force during the static period
     * happening right after this sequence was measured.
     *
     * @return y-coordinate of mean specific force.
     */
    public Acceleration getAfterMeanSpecificForceY() {
<span class="fc" id="L685">        return new Acceleration(mAfterMeanFy,</span>
                AccelerationUnit.METERS_PER_SQUARED_SECOND);
    }

    /**
     * Sets y-coordinate of mean specific force during the static period
     * happening right after this sequence was measured.
     *
     * @param afterMeanSpecificForceY y-coordinate of mean specific force.
     */
    public void setAfterMeanSpecificForceY(
            final Acceleration afterMeanSpecificForceY) {
<span class="fc" id="L697">        mAfterMeanFy = convertAcceleration(afterMeanSpecificForceY);</span>
<span class="fc" id="L698">    }</span>

    /**
     * Gets z-coordinate of mean specific force during the static period
     * happening right after this sequence was measured.
     *
     * @param result z-coordinate of mean specific force.
     */
    public void getAfterMeanSpecificForceZ(final Acceleration result) {
<span class="fc" id="L707">        result.setValue(mAfterMeanFz);</span>
<span class="fc" id="L708">        result.setUnit(AccelerationUnit.METERS_PER_SQUARED_SECOND);</span>
<span class="fc" id="L709">    }</span>

    /**
     * Gets z-coordinate of mean specific force during the static period
     * happening right after this sequence was measured.
     *
     * @return z-coordinate of mean specific force.
     */
    public Acceleration getAfterMeanSpecificForceZ() {
<span class="fc" id="L718">        return new Acceleration(mAfterMeanFz,</span>
                AccelerationUnit.METERS_PER_SQUARED_SECOND);
    }

    /**
     * Sets z-coordinate of mean specific force during the static period
     * happening right after this sequence was measured.
     *
     * @param afterMeanSpecificForceZ z-coordinate of mean specific force.
     */
    public void setAfterMeanSpecificForceZ(
            final Acceleration afterMeanSpecificForceZ) {
<span class="fc" id="L730">        mAfterMeanFz = convertAcceleration(afterMeanSpecificForceZ);</span>
<span class="fc" id="L731">    }</span>

    /**
     * Sets coordinates of mean specific force during the static period
     * happening right after this sequence was measured.
     *
     * @param afterMeanSpecificForceX x-coordinate of mean specific force.
     * @param afterMeanSpecificForceY y-coordinate of mean specific force.
     * @param afterMeanSpecificForceZ z-coordinate of mean specific force.
     */
    public void setAfterMeanSpecificForceCoordinates(
            final Acceleration afterMeanSpecificForceX,
            final Acceleration afterMeanSpecificForceY,
            final Acceleration afterMeanSpecificForceZ) {
<span class="fc" id="L745">        setAfterMeanSpecificForceX(afterMeanSpecificForceX);</span>
<span class="fc" id="L746">        setAfterMeanSpecificForceY(afterMeanSpecificForceY);</span>
<span class="fc" id="L747">        setAfterMeanSpecificForceZ(afterMeanSpecificForceZ);</span>
<span class="fc" id="L748">    }</span>

    /**
     * Copies data of provided instance into this instance.
     *
     * @param input instance to copy data from.
     */
    public void copyFrom(final BodyKinematicsSequence&lt;T&gt; input) {
<span class="fc bfc" id="L756" title="All 2 branches covered.">        if (input.mItems != null) {</span>
<span class="fc" id="L757">            mItems = cloneList(input.mItems);</span>
        } else {
<span class="fc" id="L759">            mItems = null;</span>
        }
<span class="fc bfc" id="L761" title="All 2 branches covered.">        if (input.mSortedItems != null) {</span>
<span class="fc" id="L762">            mSortedItems = cloneList(input.mSortedItems);</span>
        } else {
<span class="fc" id="L764">            mSortedItems = null;</span>
        }

<span class="fc" id="L767">        mBeforeMeanFx = input.mBeforeMeanFx;</span>
<span class="fc" id="L768">        mBeforeMeanFy = input.mBeforeMeanFy;</span>
<span class="fc" id="L769">        mBeforeMeanFz = input.mBeforeMeanFz;</span>

<span class="fc" id="L771">        mAfterMeanFx = input.mAfterMeanFx;</span>
<span class="fc" id="L772">        mAfterMeanFy = input.mAfterMeanFy;</span>
<span class="fc" id="L773">        mAfterMeanFz = input.mAfterMeanFz;</span>
<span class="fc" id="L774">    }</span>

    /**
     * Copies this instance data into provided instance.
     *
     * @param output destination instance where data will be copied to.
     */
    public void copyTo(final BodyKinematicsSequence&lt;T&gt; output) {
<span class="fc" id="L782">        output.copyFrom(this);</span>
<span class="fc" id="L783">    }</span>

    /***
     * Checks if provided instance is a BodyKinematicsSequence2 having exactly
     * the same contents as this instance.
     *
     * @param o object to be compared.
     * @return true if both objects are considered to be equal, false otherwise.
     */
    @Override
    public boolean equals(Object o) {
<span class="pc bpc" id="L794" title="1 of 2 branches missed.">        if (this == o) return true;</span>
<span class="pc bpc" id="L795" title="2 of 4 branches missed.">        if (o == null || getClass() != o.getClass()) return false;</span>
<span class="fc" id="L796">        final BodyKinematicsSequence&lt;?&gt; that = (BodyKinematicsSequence&lt;?&gt;) o;</span>
<span class="fc bfc" id="L797" title="All 2 branches covered.">        return Double.compare(that.mBeforeMeanFx, mBeforeMeanFx) == 0 &amp;&amp;</span>
<span class="pc bpc" id="L798" title="1 of 2 branches missed.">                Double.compare(that.mBeforeMeanFy, mBeforeMeanFy) == 0 &amp;&amp;</span>
<span class="pc bpc" id="L799" title="1 of 2 branches missed.">                Double.compare(that.mBeforeMeanFz, mBeforeMeanFz) == 0 &amp;&amp;</span>
<span class="pc bpc" id="L800" title="1 of 2 branches missed.">                Double.compare(that.mAfterMeanFx, mAfterMeanFx) == 0 &amp;&amp;</span>
<span class="pc bpc" id="L801" title="1 of 2 branches missed.">                Double.compare(that.mAfterMeanFy, mAfterMeanFy) == 0 &amp;&amp;</span>
<span class="pc bpc" id="L802" title="1 of 2 branches missed.">                Double.compare(that.mAfterMeanFz, mAfterMeanFz) == 0 &amp;&amp;</span>
<span class="pc bpc" id="L803" title="1 of 2 branches missed.">                Objects.equals(mItems, that.mItems) &amp;&amp;</span>
<span class="pc bpc" id="L804" title="1 of 2 branches missed.">                Objects.equals(mSortedItems, that.mSortedItems);</span>
    }

    /**
     * Computes and returns hash code for this instance. Hash codes are almost unique
     * values that are useful for fast classification and storage of objects in collections.
     *
     * @return Hash code.
     */
    @Override
    public int hashCode() {
<span class="fc" id="L815">        return Objects.hash(mItems, mSortedItems,</span>
<span class="fc" id="L816">                mBeforeMeanFx, mBeforeMeanFy, mBeforeMeanFz,</span>
<span class="fc" id="L817">                mAfterMeanFx, mAfterMeanFy, mAfterMeanFz);</span>
    }

    /**
     * Makes a copy of this instance.
     *
     * @return a copy of this instance.
     * @throws CloneNotSupportedException if clone fails for some reason.
     */
    @Override
    protected Object clone() throws CloneNotSupportedException {
        //noinspection unchecked
<span class="fc" id="L829">        final BodyKinematicsSequence&lt;T&gt; result =</span>
<span class="fc" id="L830">                (BodyKinematicsSequence&lt;T&gt;) super.clone();</span>
<span class="fc" id="L831">        copyTo(result);</span>
<span class="fc" id="L832">        return result;</span>
    }

    /**
     * Clones a list of {@link TimedBodyKinematics}.
     *
     * @param list list to be cloned.
     * @return cloned list.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    private List&lt;T&gt; cloneList(final List&lt;T&gt; list) {
        // constructor with list only creates a new list containing the
        // same instances as the original list.
        // ArrayList is publicly Cloneable, so we clone it to get copies
        // of the elements contained within.

<span class="fc" id="L848">        final ArrayList&lt;T&gt; result = new ArrayList&lt;&gt;();</span>
<span class="fc bfc" id="L849" title="All 2 branches covered.">        for (final T item : list) {</span>
<span class="pc bpc" id="L850" title="1 of 2 branches missed.">            if (item instanceof StandardDeviationTimedBodyKinematics) {</span>
<span class="fc" id="L851">                final StandardDeviationTimedBodyKinematics newItem =</span>
                        new StandardDeviationTimedBodyKinematics();
<span class="fc" id="L853">                newItem.copyFrom(item);</span>
<span class="fc" id="L854">                result.add((T) newItem);</span>
<span class="fc" id="L855">            } else {</span>
<span class="nc" id="L856">                final TimedBodyKinematics newItem =</span>
                        new TimedBodyKinematics(item);
<span class="nc" id="L858">                result.add((T) newItem);</span>
            }
<span class="fc" id="L860">        }</span>

<span class="fc" id="L862">        return result;</span>
    }

    /**
     * Converts an acceleration instance into its corresponding value
     * expressed in meters per squared second.
     *
     * @param acceleration an acceleration to be converted.
     * @return converted value.
     */
    private static double convertAcceleration(final Acceleration acceleration) {
<span class="fc" id="L873">        return AccelerationConverter.convert(acceleration.getValue().doubleValue(),</span>
<span class="fc" id="L874">                acceleration.getUnit(),</span>
                AccelerationUnit.METERS_PER_SQUARED_SECOND);
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.2.201808211720</span></div></body></html>